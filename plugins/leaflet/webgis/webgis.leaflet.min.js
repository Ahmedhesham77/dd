/**
 * Gurtam Map layer for Leaflet
 *
 * @filename: webgis.leaflet
 * @version 0.0.1
 *
 * @author Gurtam <gurtam.com>
 * @copyright 2002-2023 Gurtam
 * @license http://www.gnu.org/licenses/lgpl.html LGPL
 **/
L.TileLayer.WebGis=L.TileLayer.extend({initialize:function(a,b){L.TileLayer.prototype.initialize.call(this,a,b),b.userId=b.userId||0,b.nocache=b.nocache||!1,this._url=a+"/gis_render/{x}_{y}_{z}/"+b.userId+"/tile.png",b.nocache&&(this._url+="?t="+(new Date).getTime()),b.sessionId&&(this._url+=(-1==this._url.indexOf("?")?"?":"&")+"sid="+b.sessionId)},getTileUrl:function(a){return L.Util.template(this._url,L.extend({r:this.options.detectRetina&&L.Browser.retina&&this.options.maxZoom>0?"@2x":"",s:this._getSubdomain(a),z:17-this._getZoomForUrl(),x:a.x,y:a.y},this.options))}}),L.tileLayer.webGis=function(a,b){return new L.TileLayer.WebGis(a,b)};